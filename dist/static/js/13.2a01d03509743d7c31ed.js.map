{"version":3,"sources":["webpack:///src/view/rule/maintain.vue","webpack:///./src/view/rule/maintain.vue?1ee7","webpack:///./src/view/rule/maintain.vue"],"names":["maintain","name","components","AutoSearch","Pagination","data","tableHeight","loading","searchKey","list","page","pageSize","pageNo","totalCount","totalPage","choose","id","label","currentRow","tabIndex","searchList","applicableList","treatment","oldTreatment","treatmentType","desp","created","this","getAllMedcine","getAllList","mounted","_this","setTimeout","window","innerHeight","methods","handleSearch","handleClickRow","row","_this2","res","stringify_default","$confirm","confirmButtonText","cancelButtonText","type","then","diagnosisName","handleData","catch","$refs","table","setCurrentRow","beforeLeave","tab","_this3","Number","console","log","Error","getApplicableList","getTreatment","handleDelete","_this4","deleteApplicable","_this5","asyncToGenerator_default","regenerator_default","a","mark","_callee","wrap","_context","prev","next","Object","dataMana","sent","code","$message","success","error","msg","stop","handleAdd","val","_this6","_callee2","obj","_context2","diagnosisId","medcineId","handleSave","_this7","_callee3","_context3","_this8","_callee4","_context4","result","_this9","_callee5","_context5","key","_this10","_callee6","args","_context6","filter","_this11","_callee7","_context7","allMedcine","JSON","parse","forEach","item","assign_default","value","tableHeaderName","_ref","rowIndex","render","_vm","_h","$createElement","_c","_self","staticStyle","height","attrs","gutter","span","staticClass","slot","_v","size","placeholder","clearable","on","change","model","callback","$$v","expression","ref","width","highlight-current-row","border","header-cell-class-name","row-click","prop","align","handlePageChange","_s","_e","before-leave","placeHolder","handleSelect","scopedSlots","_u","fn","scope","click","$event","label-width","$set","_l","index","duration","_withStripped","esExports","staticRenderFns","rule_maintain","Component","__webpack_require__","normalizeComponent","options","__file","__webpack_exports__"],"mappings":"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","file":"static/js/13.2a01d03509743d7c31ed.js","sourcesContent":["<template>\n  <div style=\"height: 100%\">\n    <!-- 适用药及疗程维护 -->\n    <el-row :gutter=\"20\" style=\"height: 100%\">\n      <el-col :span=\"10\" style=\"height: 100%\">\n        <el-card class=\"box-card\">\n          <div slot=\"header\" class=\"clearfix\">\n            <span class=\"f4\">诊断列表</span>\n          </div>\n          <div>\n            <el-input\n              v-model=\"searchKey\"\n              size=\"small\"\n              placeholder=\"查找诊断\"\n              clearable\n              @change=\"handleSearch\"\n            ></el-input>\n            <div class=\"space\"></div>\n            <el-table\n              ref=\"table\"\n              :data=\"list\"\n              @row-click=\"handleClickRow\"\n              highlight-current-row\n              border\n              size=\"small\"\n              style=\"width: 100%;\"\n              :height=\"tableHeight\"\n              :header-cell-class-name=\"tableHeaderName\"\n            >\n              <el-table-column prop=\"icd10\" label=\"编码\" align=\"center\" width=\"100\"></el-table-column>\n              <el-table-column prop=\"diagnosisName\" label=\"名称\" align=\"center\"></el-table-column>\n            </el-table>\n            <Pagination class=\"text-center\" :page=\"page\" @handlePageChange=\"getAllList\"/>\n          </div>\n        </el-card>\n      </el-col>\n      <el-col :span=\"14\" style=\"height: 100%\">\n        <el-card class=\"box-card\" style=\"height: 100%\">\n          <div slot=\"header\" class=\"clearfix\">\n            <span class=\"f4\">适用药</span>\n            <span class=\"f1 font-bold\" v-if=\"choose.label\">【 {{choose.label}} 】</span>\n          </div>\n          <div class=\"f4\" v-if=\"!choose.label\">请先选择药品</div>\n          <el-tabs v-if=\"choose.label\" :before-leave=\"beforeLeave\">\n            <el-tab-pane label=\"适用药品\">\n              <AutoSearch :placeHolder=\"'添加药品'\" :list=\"searchList\" @handleSelect=\"handleAdd\"/>\n              <div class=\"space\"></div>\n              <el-table\n                :data=\"applicableList\"\n                border\n                size=\"small\"\n                style=\"width: 100%;\"\n                :height=\"tableHeight\"\n                :header-cell-class-name=\"tableHeaderName\"\n              >\n                <el-table-column prop=\"medcineName\" label=\"药品通用名\" align=\"center\"></el-table-column>\n                <el-table-column prop=\"enable\" label=\"操作\" align=\"center\" width=\"80\">\n                  <template slot-scope=\"scope\">\n                    <i @click=\"handleDelete(scope.row.id)\" class=\"el-icon-delete text-red pointer\"></i>\n                  </template>\n                </el-table-column>\n              </el-table>\n            </el-tab-pane>\n            <el-tab-pane label=\"疗程设置\">\n              <p v-if=\"!treatment.id\" class=\"f6\">无诊断疗程信息~</p>\n              <el-form v-else :model=\"treatment\" size=\"small\" label-width=\"85px\">\n                <el-form-item label=\"疗程时间：\">\n                  <el-radio-group v-model=\"treatment.type\">\n                    <el-radio v-for=\"(item, index) in treatmentType\" :key=\"index\" :label=\"item.id\">\n                      {{item.desp}}\n                      <template v-if=\"item.id === 2 && treatment.type === 2\">\n                        <el-input\n                          v-model=\"treatment.duration\"\n                          size=\"small\"\n                          placeholder\n                          type=\"number\"\n                          style=\"width: 80px;\"\n                        ></el-input>天\n                      </template>\n                    </el-radio>\n                  </el-radio-group>\n                </el-form-item>\n                <el-form-item>\n                  <el-button type=\"primary\" @click=\"handleSave\" :loading=\"loading\">保存</el-button>\n                </el-form-item>\n              </el-form>\n            </el-tab-pane>\n          </el-tabs>\n        </el-card>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport {\n  SelectAllDiagnosis,\n  SelectTreatment,\n  UpdatTreatment,\n  GetApplicable,\n  DeleteApplicable,\n  AddApplicable,\n  Allmedcinefold\n} from '@/api/dataMana'\nimport AutoSearch from '@/components/AutoSearch'\nimport Pagination from '@/components/Pagination'\n\nexport default {\n  name: '',\n  components: { AutoSearch, Pagination },\n  data() {\n    return {\n      tableHeight: 50,\n      loading: false,\n      searchKey: '', // 查询诊断 关键字\n      list: [], // 诊断信息\n      page: {\n        pageSize: 10, // 每页显示10条数据\n        pageNo: 1, // 当前页码\n        totalCount: 0,\n        totalPage: 0\n      },\n      choose: {\n        id: '',\n        label: ''\n      },\n      currentRow: null,\n      tabIndex: 0,\n      searchList: [],\n      applicableList: [], // 适用药品列表\n      treatment: {}, // 疗程\n      oldTreatment: {}, // 疗程\n      treatmentType: [\n        { id: 0, desp: '7天' },\n        { id: 1, desp: '30天' },\n        { id: 2, desp: '自定义' }\n      ]\n    }\n  },\n  created() {\n    this.getAllMedcine()\n    this.getAllList()\n  },\n  mounted() {\n    setTimeout(() => {\n      this.tableHeight = window.innerHeight - 350\n    }, 100)\n  },\n  methods: {\n    // 诊断列表查询诊断\n    handleSearch() {\n      this.getAllList(this.searchKey)\n      this.choose = {\n        id: '',\n        label: ''\n      }\n    },\n\n    // 点击 表格\n    handleClickRow(row) {\n      let res = true\n      if (this.tabIndex === 1 && this.treatment.id > 0) {\n        res = this.oldTreatment === JSON.stringify(this.treatment)\n      }\n      if (res) {\n        this.choose = {\n          id: row.id,\n          label: row.diagnosisName\n        }\n        this.treatment = {}\n        this.handleData(this.tabIndex)\n        this.currentRow = row\n      } else {\n        return this.$confirm('当前页面未保存，是否确认离开？', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          this.choose = {\n            id: row.id,\n            label: row.diagnosisName\n          }\n          this.treatment = {}\n          this.handleData(this.tabIndex)\n          this.currentRow = row\n        }).catch(() => {\n          this.$refs.table.setCurrentRow(this.currentRow)\n        })\n      }\n    },\n    beforeLeave(tab) {\n      let res = true\n      if (this.tabIndex === 1 && this.treatment.id > 0) {\n        res = this.oldTreatment === JSON.stringify(this.treatment)\n      }\n      if (res) {\n        this.tabIndex = Number(tab)\n        this.handleData(this.tabIndex)\n      } else {\n        return this.$confirm('当前页面未保存，是否确认离开？', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          this.tabIndex = Number(tab)\n          this.handleData(this.tabIndex)\n        }).catch(() => {\n          console.log('cancle')\n          throw new Error('cancle')\n        })\n      }\n    },\n    // 判断 tab 调用 不同的接口\n    handleData(tabIndex) {\n      if (tabIndex === 0) {\n        // 根据诊断表的id获取适用药品列表\n        this.getApplicableList()\n      } else if (tabIndex === 1) {\n        // 疗程\n        this.getTreatment()\n      }\n    },\n    // 点击删除\n    handleDelete(id) {\n      this.$confirm('确定删除吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.deleteApplicable(id)\n      }).catch(() => { })\n    },\n    // 删除 药品适用\n    async deleteApplicable(id) {\n      const res = await DeleteApplicable({ id })\n      if (res.code === 0) {\n        this.$message.success('删除成功!')\n        this.getApplicableList()\n      } else {\n        this.$message.error(res.msg)\n      }\n    },\n    // 增加 药品适用\n    async handleAdd(val) {\n      const obj = {\n        diagnosisId: this.choose.id,\n        medcineId: val.id\n      }\n      const res = await AddApplicable(obj)\n      if (res.code === 0) {\n        this.getApplicableList()\n      } else {\n        this.$message.error(res.msg)\n      }\n    },\n    // 保存 疗程\n    async handleSave() {\n      this.loading = true\n      const res = await UpdatTreatment(this.treatment)\n      this.loading = false\n      if (res.code === 0) {\n        this.$message.success(res.msg)\n        this.getTreatment()\n      } else {\n        this.$message.error(res.msg)\n      }\n    },\n    // 根据诊断表的id获取适用药品列表\n    async getApplicableList() {\n      const res = await GetApplicable({ diagnosisId: this.choose.id })\n      if (res.code === 0) {\n        this.applicableList = res.result\n      } else {\n        this.$message.error(res.msg)\n      }\n    },\n    // 获取疗程\n    async getTreatment() {\n      const res = await SelectTreatment({ diagnosisId: this.choose.id })\n      if (res.code === 0) {\n        this.treatment = res.result[0] || this.treatment\n        this.oldTreatment = JSON.stringify(this.treatment)\n      }\n    },\n    // 获取诊断信息\n    async getAllList(key) {\n      const args = {\n        filter: key,\n        pageNo: this.page.pageNo,\n        pageSize: this.page.pageSize\n      }\n      const res = await SelectAllDiagnosis(args)\n      if (res.code === 0) {\n        this.list = res.result\n        this.page = res.page || this.page\n      } else {\n        this.$message.error(res.msg)\n      }\n    },\n\n    // 获取药品信息\n    async getAllMedcine() {\n      const res = await Allmedcinefold()\n      if (res.code === 0) {\n        this.allMedcine = res.result\n        this.searchList = JSON.parse(JSON.stringify(this.allMedcine))\n        this.searchList.forEach((item) => { Object.assign(item, { value: item.name }) })\n      }\n    },\n\n    // 修改table header的背景色\n    tableHeaderName({ row, rowIndex }) {\n      return 'table-header'\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/view/rule/maintain.vue","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticStyle: { height: \"100%\" } },\n    [\n      _c(\n        \"el-row\",\n        { staticStyle: { height: \"100%\" }, attrs: { gutter: 20 } },\n        [\n          _c(\n            \"el-col\",\n            { staticStyle: { height: \"100%\" }, attrs: { span: 10 } },\n            [\n              _c(\"el-card\", { staticClass: \"box-card\" }, [\n                _c(\n                  \"div\",\n                  {\n                    staticClass: \"clearfix\",\n                    attrs: { slot: \"header\" },\n                    slot: \"header\"\n                  },\n                  [_c(\"span\", { staticClass: \"f4\" }, [_vm._v(\"诊断列表\")])]\n                ),\n                _vm._v(\" \"),\n                _c(\n                  \"div\",\n                  [\n                    _c(\"el-input\", {\n                      attrs: {\n                        size: \"small\",\n                        placeholder: \"查找诊断\",\n                        clearable: \"\"\n                      },\n                      on: { change: _vm.handleSearch },\n                      model: {\n                        value: _vm.searchKey,\n                        callback: function($$v) {\n                          _vm.searchKey = $$v\n                        },\n                        expression: \"searchKey\"\n                      }\n                    }),\n                    _vm._v(\" \"),\n                    _c(\"div\", { staticClass: \"space\" }),\n                    _vm._v(\" \"),\n                    _c(\n                      \"el-table\",\n                      {\n                        ref: \"table\",\n                        staticStyle: { width: \"100%\" },\n                        attrs: {\n                          data: _vm.list,\n                          \"highlight-current-row\": \"\",\n                          border: \"\",\n                          size: \"small\",\n                          height: _vm.tableHeight,\n                          \"header-cell-class-name\": _vm.tableHeaderName\n                        },\n                        on: { \"row-click\": _vm.handleClickRow }\n                      },\n                      [\n                        _c(\"el-table-column\", {\n                          attrs: {\n                            prop: \"icd10\",\n                            label: \"编码\",\n                            align: \"center\",\n                            width: \"100\"\n                          }\n                        }),\n                        _vm._v(\" \"),\n                        _c(\"el-table-column\", {\n                          attrs: {\n                            prop: \"diagnosisName\",\n                            label: \"名称\",\n                            align: \"center\"\n                          }\n                        })\n                      ],\n                      1\n                    ),\n                    _vm._v(\" \"),\n                    _c(\"Pagination\", {\n                      staticClass: \"text-center\",\n                      attrs: { page: _vm.page },\n                      on: { handlePageChange: _vm.getAllList }\n                    })\n                  ],\n                  1\n                )\n              ])\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"el-col\",\n            { staticStyle: { height: \"100%\" }, attrs: { span: 14 } },\n            [\n              _c(\n                \"el-card\",\n                { staticClass: \"box-card\", staticStyle: { height: \"100%\" } },\n                [\n                  _c(\n                    \"div\",\n                    {\n                      staticClass: \"clearfix\",\n                      attrs: { slot: \"header\" },\n                      slot: \"header\"\n                    },\n                    [\n                      _c(\"span\", { staticClass: \"f4\" }, [_vm._v(\"适用药\")]),\n                      _vm._v(\" \"),\n                      _vm.choose.label\n                        ? _c(\"span\", { staticClass: \"f1 font-bold\" }, [\n                            _vm._v(\"【 \" + _vm._s(_vm.choose.label) + \" 】\")\n                          ])\n                        : _vm._e()\n                    ]\n                  ),\n                  _vm._v(\" \"),\n                  !_vm.choose.label\n                    ? _c(\"div\", { staticClass: \"f4\" }, [_vm._v(\"请先选择药品\")])\n                    : _vm._e(),\n                  _vm._v(\" \"),\n                  _vm.choose.label\n                    ? _c(\n                        \"el-tabs\",\n                        { attrs: { \"before-leave\": _vm.beforeLeave } },\n                        [\n                          _c(\n                            \"el-tab-pane\",\n                            { attrs: { label: \"适用药品\" } },\n                            [\n                              _c(\"AutoSearch\", {\n                                attrs: {\n                                  placeHolder: \"添加药品\",\n                                  list: _vm.searchList\n                                },\n                                on: { handleSelect: _vm.handleAdd }\n                              }),\n                              _vm._v(\" \"),\n                              _c(\"div\", { staticClass: \"space\" }),\n                              _vm._v(\" \"),\n                              _c(\n                                \"el-table\",\n                                {\n                                  staticStyle: { width: \"100%\" },\n                                  attrs: {\n                                    data: _vm.applicableList,\n                                    border: \"\",\n                                    size: \"small\",\n                                    height: _vm.tableHeight,\n                                    \"header-cell-class-name\":\n                                      _vm.tableHeaderName\n                                  }\n                                },\n                                [\n                                  _c(\"el-table-column\", {\n                                    attrs: {\n                                      prop: \"medcineName\",\n                                      label: \"药品通用名\",\n                                      align: \"center\"\n                                    }\n                                  }),\n                                  _vm._v(\" \"),\n                                  _c(\"el-table-column\", {\n                                    attrs: {\n                                      prop: \"enable\",\n                                      label: \"操作\",\n                                      align: \"center\",\n                                      width: \"80\"\n                                    },\n                                    scopedSlots: _vm._u([\n                                      {\n                                        key: \"default\",\n                                        fn: function(scope) {\n                                          return [\n                                            _c(\"i\", {\n                                              staticClass:\n                                                \"el-icon-delete text-red pointer\",\n                                              on: {\n                                                click: function($event) {\n                                                  return _vm.handleDelete(\n                                                    scope.row.id\n                                                  )\n                                                }\n                                              }\n                                            })\n                                          ]\n                                        }\n                                      }\n                                    ])\n                                  })\n                                ],\n                                1\n                              )\n                            ],\n                            1\n                          ),\n                          _vm._v(\" \"),\n                          _c(\n                            \"el-tab-pane\",\n                            { attrs: { label: \"疗程设置\" } },\n                            [\n                              !_vm.treatment.id\n                                ? _c(\"p\", { staticClass: \"f6\" }, [\n                                    _vm._v(\"无诊断疗程信息~\")\n                                  ])\n                                : _c(\n                                    \"el-form\",\n                                    {\n                                      attrs: {\n                                        model: _vm.treatment,\n                                        size: \"small\",\n                                        \"label-width\": \"85px\"\n                                      }\n                                    },\n                                    [\n                                      _c(\n                                        \"el-form-item\",\n                                        { attrs: { label: \"疗程时间：\" } },\n                                        [\n                                          _c(\n                                            \"el-radio-group\",\n                                            {\n                                              model: {\n                                                value: _vm.treatment.type,\n                                                callback: function($$v) {\n                                                  _vm.$set(\n                                                    _vm.treatment,\n                                                    \"type\",\n                                                    $$v\n                                                  )\n                                                },\n                                                expression: \"treatment.type\"\n                                              }\n                                            },\n                                            _vm._l(_vm.treatmentType, function(\n                                              item,\n                                              index\n                                            ) {\n                                              return _c(\n                                                \"el-radio\",\n                                                {\n                                                  key: index,\n                                                  attrs: { label: item.id }\n                                                },\n                                                [\n                                                  _vm._v(\n                                                    \"\\n                    \" +\n                                                      _vm._s(item.desp) +\n                                                      \"\\n                    \"\n                                                  ),\n                                                  item.id === 2 &&\n                                                  _vm.treatment.type === 2\n                                                    ? [\n                                                        _c(\"el-input\", {\n                                                          staticStyle: {\n                                                            width: \"80px\"\n                                                          },\n                                                          attrs: {\n                                                            size: \"small\",\n                                                            placeholder: \"\",\n                                                            type: \"number\"\n                                                          },\n                                                          model: {\n                                                            value:\n                                                              _vm.treatment\n                                                                .duration,\n                                                            callback: function(\n                                                              $$v\n                                                            ) {\n                                                              _vm.$set(\n                                                                _vm.treatment,\n                                                                \"duration\",\n                                                                $$v\n                                                              )\n                                                            },\n                                                            expression:\n                                                              \"treatment.duration\"\n                                                          }\n                                                        }),\n                                                        _vm._v(\n                                                          \"天\\n                    \"\n                                                        )\n                                                      ]\n                                                    : _vm._e()\n                                                ],\n                                                2\n                                              )\n                                            }),\n                                            1\n                                          )\n                                        ],\n                                        1\n                                      ),\n                                      _vm._v(\" \"),\n                                      _c(\n                                        \"el-form-item\",\n                                        [\n                                          _c(\n                                            \"el-button\",\n                                            {\n                                              attrs: {\n                                                type: \"primary\",\n                                                loading: _vm.loading\n                                              },\n                                              on: { click: _vm.handleSave }\n                                            },\n                                            [_vm._v(\"保存\")]\n                                          )\n                                        ],\n                                        1\n                                      )\n                                    ],\n                                    1\n                                  )\n                            ],\n                            1\n                          )\n                        ],\n                        1\n                      )\n                    : _vm._e()\n                ],\n                1\n              )\n            ],\n            1\n          )\n        ],\n        1\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\nif (module.hot) {\n  module.hot.accept()\n  if (module.hot.data) {\n    require(\"vue-hot-reload-api\")      .rerender(\"data-v-380aa6ed\", esExports)\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-380aa6ed\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/rule/maintain.vue\n// module id = null\n// module chunks = ","var disposed = false\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./maintain.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./maintain.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-380aa6ed\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./maintain.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\nComponent.options.__file = \"src/view/rule/maintain.vue\"\n\n/* hot reload */\nif (module.hot) {(function () {\n  var hotAPI = require(\"vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), false)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-380aa6ed\", Component.options)\n  } else {\n    hotAPI.reload(\"data-v-380aa6ed\", Component.options)\n  }\n  module.hot.dispose(function (data) {\n    disposed = true\n  })\n})()}\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/rule/maintain.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}