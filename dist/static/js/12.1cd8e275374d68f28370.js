webpackJsonp([12],{GNo0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Xxa5"),r=n.n(a),l=n("exGp"),s=n.n(l),i=n("woOf"),o=n.n(i),c=n("mvHQ"),u=n.n(c),d=n("JnX+"),p=n("zMP6"),b={name:"review",data:function(){return{loading:!1,list:[],oldList:[],newList:[],auditlevel:d.a}},beforeRouteLeave:function(e,t,n){this.newList=JSON.parse(u()(this.list)),this.newList.map(function(e){return o()(e,{enable:Number(e.enable)})}),this.oldList===u()(this.newList)?n():this.$confirm("当前页面未保存，是否确认离开？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n()}).catch(function(){n(!1)})},created:function(){this.handleGetList()},methods:{handleSave:function(){this.newList=JSON.parse(u()(this.list)),this.newList.map(function(e){return o()(e,{enable:Number(e.enable)})}),this.updateAuditrules(u()(this.newList))},updateAuditrules:function(e){var t=this;return s()(r.a.mark(function n(){var a;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.loading=!0,n.next=3,Object(p.J)(e);case 3:a=n.sent,t.loading=!1,0===a.code?(t.$message.success("保存成功"),t.handleGetList()):t.$message.error(a.msg);case 6:case"end":return n.stop()}},n,t)}))()},handleGetList:function(){var e=this;return s()(r.a.mark(function t(){var n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(p.B)();case 2:0===(n=t.sent).code&&(e.list=n.result,e.oldList=u()(n.result),e.list.map(function(e){return o()(e,{enable:Boolean(e.enable)})}));case 4:case"end":return t.stop()}},t,e)}))()},tableRowClassName:function(e){e.row;return e.rowIndex%2==0?"row1":"row2"},tableHeaderName:function(){return"table-header"}}},f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"text-right"},[n("el-button",{attrs:{type:"primary",size:"small"}},[e._v("同步数据")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"small",loading:e.loading},on:{click:e.handleSave}},[e._v("保存")])],1),e._v(" "),n("div",{staticClass:"space"}),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:"","row-class-name":e.tableRowClassName,"header-cell-class-name":e.tableHeaderName,size:"small"}},[n("el-table-column",{attrs:{prop:"code",label:"问题代码",align:"center",width:"150"}}),e._v(" "),n("el-table-column",{attrs:{prop:"problemName",label:"问题名称",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"enable",label:"区域审方启用",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{model:{value:t.row.enable,callback:function(n){e.$set(t.row,"enable",n)},expression:"scope.row.enable"}},[e._v("启用")])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"action",label:"警示级别设置",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-radio-group",{attrs:{disabled:!t.row.enable},model:{value:t.row.action,callback:function(n){e.$set(t.row,"action",n)},expression:"scope.row.action"}},e._l(e.auditlevel,function(t,a){return n("el-radio",{key:a,attrs:{label:t.id}},[e._v(e._s(t.desp))])}),1)]}}])})],1)],1)};f._withStripped=!0;var v={render:f,staticRenderFns:[]},m=v;var w=n("VU/8")(b,m,!1,null,null,null);w.options.__file="src/view/rule/review.vue";t.default=w.exports}});
//# sourceMappingURL=12.1cd8e275374d68f28370.js.map