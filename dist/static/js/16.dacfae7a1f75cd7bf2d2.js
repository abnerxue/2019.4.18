webpackJsonp([16],{gxPR:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n,i=a("Xxa5"),s=a.n(i),l=a("exGp"),o=a.n(l),m=a("Vo7i"),u=a("P9l9").a.report,c=u.getreportsummary,p=u.getreportsummarydetail,d=(r=o()(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.a)(c,t,"GET");case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)}),h=(n=o()(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.a)(p,t,"GET");case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)}),f=a("yCvJ"),g={name:"",components:{Pagination:a("cMGX").a},data:function(){return{page:{pageSize:10,pageNo:1,totalCount:"",totalPage:""},form:{beginTime:"",endTime:""},stateList:[],summarySheetKey:[{prop:"state",width:"",label:"审核结果"},{prop:"number",width:"",label:"人数"},{prop:"percentage",width:"",label:"构成比"}],summarySheetList:[],summaryDetailKey:[{prop:"prescriptionNumber",width:"",label:"处方号"},{prop:"patientName",width:"",label:"患者姓名"},{prop:"patientSex",width:"",label:"性别"},{prop:"deptName",width:"",label:"就诊科室"},{prop:"doctorName",width:"",label:"医师姓名"},{prop:"auditPharmacistName",width:"",label:"审核药师姓名"},{prop:"auditResult",width:"",label:"系统审核结果"},{prop:"problemName",width:"",label:"未通过审核原因"}],summaryDetailList:[]}},created:function(){this.getAllauditstateList(),this.getTime()},methods:{getTime:function(){var e=function(e){return e<10?"0"+e:e},t=new Date,a=t.getFullYear(),r=t.getMonth()+1,n=t.getDate();this.form.beginTime=a+"-"+e(r)+"-"+e(n)+" 00:00:00",this.form.endTime=a+"-"+e(r)+"-"+e(n)+" 23:59:59"},getAllauditstateList:function(){var e=this;return o()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(f.d)();case 2:0===(a=t.sent).code?e.stateList=a.result:e.$message.error(a.msg);case 4:case"end":return t.stop()}},t,e)}))()},getReportSummaryList:function(){var e=this;return o()(s.a.mark(function t(){var a,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.form.beginTime+","+e.form.endTime,t.next=3,d({beginDateScope:a});case 3:0===(r=t.sent).code?(e.summarySheetList=r.result.result,e.summarySheetList.length>0&&e.summarySheetList.map(function(t){e.stateList.map(function(e){t.state===e.id&&(t.state=e.stateName)})})):e.$message.error(r.msg);case 5:case"end":return t.stop()}},t,e)}))()},getReportSummaryDetailList:function(){var e=this;return o()(s.a.mark(function t(){var a,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.form.beginTime+","+e.form.endTime,t.next=3,h({beginDateScope:a,pageNo:e.page.pageNo,pageSize:e.page.pageSize});case 3:0===(r=t.sent).code?(e.summaryDetailList=r.result,e.page=r.page||e.page,e.summaryDetailList.length>0&&e.summaryDetailList.map(function(e){e.patientSex=0===e.patientSex?"男":"女"})):e.$message.error(r.msg);case 5:case"end":return t.stop()}},t,e)}))()},handleSearch:function(){if(!this.form.beginTime||!this.form.endTime)return this.$message.warning("请选择时间"),!1;this.page.pageNo=1,this.getReportSummaryList(),this.getReportSummaryDetailList()},handlePage:function(){this.getReportSummaryDetailList()},tableRowClassName:function(e){e.row;return e.rowIndex%2==0?"row1":"row2"},tableHeaderName:function(e){e.row,e.rowIndex;return"table-header"}}},b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%"}},[a("el-form",{attrs:{inline:!0,model:e.form,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"时间选择："}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"开始日期时间","value-format":"yyyy-MM-dd HH:mm:ss","default-time":"00:00:00"},model:{value:e.form.beginTime,callback:function(t){e.$set(e.form,"beginTime",t)},expression:"form.beginTime"}}),e._v("~\n      "),a("el-date-picker",{attrs:{type:"datetime",placeholder:"结束日期时间","value-format":"yyyy-MM-dd HH:mm:ss","default-time":"23:59:59"},model:{value:e.form.endTime,callback:function(t){e.$set(e.form,"endTime",t)},expression:"form.endTime"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("查询")])],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-card",{staticClass:"box-card",staticStyle:{height:"100%","overflow-y":"auto"}},[a("div",[a("el-tabs",{on:{"tab-click":function(e){}}},[a("el-tab-pane",{attrs:{label:"处方审核汇总表"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.summarySheetList,border:"",size:"small","show-summary":"","sum-text":"合计人数","row-class-name":e.tableRowClassName,"header-cell-class-name":e.tableHeaderName}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"100",align:"center"}}),e._v(" "),e._l(e.summarySheetKey,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.label,width:e.width,align:"center"}})})],2)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"处方审核明细表"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.summaryDetailList,border:"",size:"small","row-class-name":e.tableRowClassName,"header-cell-class-name":e.tableHeaderName}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"100",align:"center"}}),e._v(" "),e._l(e.summaryDetailKey,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,label:e.label,width:e.width,align:"center"}})})],2),e._v(" "),a("Pagination",{staticClass:"text-center",attrs:{page:e.page},on:{handlePageChange:e.handlePage}})],1)],1)],1)])],1)],1)};b._withStripped=!0;var y={render:b,staticRenderFns:[]},w=y;var v=a("VU/8")(g,w,!1,null,null,null);v.options.__file="src/view/report/report.vue";t.default=v.exports}});
//# sourceMappingURL=16.dacfae7a1f75cd7bf2d2.js.map